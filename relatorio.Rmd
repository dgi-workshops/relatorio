---
title: "Relatório"
author: "DGI/SAGI"
date: "6/28/2022"
output: html_document
---

```{r conexão}
source("con/con_postgres.R")

# Lista as tabelas pertecentes ao DB
# dbListTables(con)

# Extração de dados - bolsa_familia
bolsa_familia = dbGetQuery(con, 'SELECT * FROM bolsa_familia')

# Extração de dados - microdados municípios
municipios = dbGetQuery(con, 'SELECT * FROM municipios')
```


# Descrição

Proposta de relatório automatizado usando R, com base nos dados do **Bolsa Família**.

# Conjuto de dados

Dados relativos a série histórica do Bolsa Família referentes aos anos de 2004 `a 2021, com informações da quantidade de famílias atendidas e valor repassado, assim como os micro-dados dos muncípios do Brasil.

# Análise do Ano de 2010

```{r }
library(tidyverse)

bolsa_familia_2010 = bolsa_familia %>% filter(anomes >= 201001 & anomes <= 201012)
bolsa_familia_2010 = bolsa_familia_2010 %>% group_by(ibge)
bolsa_familia_2010 = bolsa_familia_2010 %>% summarise(total_rep = sum(valor_repassado_bolsa_familia))
bolsa_familia_2010 = bolsa_familia_2010 %>% arrange(desc(total_rep))
bolsa_familia_2010 = bolsa_familia_2010[1:10,]
```


